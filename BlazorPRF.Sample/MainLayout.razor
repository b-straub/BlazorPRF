@inherits LayoutComponentBase
@using BlazorPRF.Sample.Components

<MudThemeProvider @bind-IsDarkMode="_isDarkMode" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />
<SessionExpiredPopover />
<ServiceWorkerUpdateNotification />
<InviteStatusDisplay />

<MudLayout>
    <MudAppBar Elevation="1">
        <AuthorizeView>
            <Authorized>
                <MudIconButton Icon="@Icons.Material.Filled.Menu"
                               Color="Color.Inherit"
                               Edge="Edge.Start"
                               OnClick="@(() => _drawerOpen = !_drawerOpen)" />
            </Authorized>
            <NotAuthorized>
                <MudIconButton Icon="@Icons.Material.Filled.Home"
                               Color="Color.Inherit"
                               Edge="Edge.Start"
                               Href="/" />
            </NotAuthorized>
        </AuthorizeView>
        <MudText Typo="Typo.h5" Class="ml-3">BlazorPRF Demo</MudText>
        <MudSpacer />
        <MudIconButton Icon="@(_isDarkMode ? Icons.Material.Filled.LightMode : Icons.Material.Filled.DarkMode)"
                       Color="Color.Inherit"
                       OnClick="@(() => _isDarkMode = !_isDarkMode)" />
        <MudIconButton Icon="@Icons.Custom.Brands.GitHub"
                       Color="Color.Inherit"
                       Href="https://github.com/b-straub/BlazorPRF"
                       Target="_blank" />
    </MudAppBar>

    <AuthorizeView>
        <Authorized>
            <MudDrawer @bind-Open="_drawerOpen" Elevation="2">
                <MudDrawerHeader>
                    <MudText Typo="Typo.h6">Navigation</MudText>
                </MudDrawerHeader>
                <MudNavMenu>
                    <MudNavLink Href="" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">Home</MudNavLink>
                    <MudNavLink Href="symmetric" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Lock">Symmetric</MudNavLink>
                    <MudNavLink Href="asymmetric" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Send">Asymmetric</MudNavLink>
                    <MudNavLink Href="signing" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.VerifiedUser">Signing</MudNavLink>
                    <MudNavLink Href="invite" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.GroupAdd">Identity</MudNavLink>
                    <MudNavLink Href="contacts" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Contacts">Contacts</MudNavLink>
                 </MudNavMenu>
            </MudDrawer>
        </Authorized>
    </AuthorizeView>

    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.Large" Class="my-4">
            <DatabaseErrorAlert />
            @Body
        </MudContainer>
    </MudMainContent>
</MudLayout>

@code {
    private bool _drawerOpen = true;
    private bool _isDarkMode = true;
}
