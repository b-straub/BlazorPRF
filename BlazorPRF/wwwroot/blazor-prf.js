// src/utils.ts
function zeroFill(buffer) {
  buffer.fill(0);
}
function toBase64(data) {
  return btoa(String.fromCharCode(...data));
}
function fromBase64(base64) {
  const binary = atob(base64);
  const bytes = new Uint8Array(binary.length);
  for (let i = 0; i < binary.length; i++) {
    bytes[i] = binary.charCodeAt(i);
  }
  return bytes;
}
function arrayBufferToBase64(buffer) {
  return toBase64(new Uint8Array(buffer));
}
function base64ToArrayBuffer(base64) {
  return fromBase64(base64).buffer;
}

// src/webauthn.ts
async function checkPrfSupport() {
  if (!window.PublicKeyCredential) {
    return false;
  }
  if (typeof PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable === "function") {
    const available = await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();
    if (!available) {
      return false;
    }
  }
  return true;
}
async function registerCredentialWithPrf(displayName, options) {
  try {
    const userId = crypto.getRandomValues(new Uint8Array(16));
    const effectiveDisplayName = displayName ?? options.rpName;
    const authenticatorAttachment = options.authenticatorAttachment === "platform" ? "platform" : "cross-platform";
    const publicKeyCredentialCreationOptions = {
      challenge: crypto.getRandomValues(new Uint8Array(32)),
      rp: {
        name: options.rpName,
        id: options.rpId ?? window.location.hostname
      },
      user: {
        id: userId,
        name: effectiveDisplayName,
        // Required by spec
        displayName: effectiveDisplayName
      },
      pubKeyCredParams: [
        { alg: -7, type: "public-key" },
        // ES256 (P-256)
        { alg: -257, type: "public-key" }
        // RS256
      ],
      authenticatorSelection: {
        authenticatorAttachment,
        residentKey: "required",
        userVerification: "discouraged"
      },
      timeout: options.timeoutMs,
      attestation: "none",
      extensions: {
        prf: {}
      }
    };
    const credential = await navigator.credentials.create({
      publicKey: publicKeyCredentialCreationOptions
    });
    if (credential === null) {
      return {
        success: false,
        cancelled: true
      };
    }
    const extensionResults = credential.getClientExtensionResults();
    if (!extensionResults.prf?.enabled) {
      return {
        success: false,
        errorCode: "PrfNotSupported" /* PrfNotSupported */
      };
    }
    return {
      success: true,
      value: {
        id: credential.id,
        rawId: arrayBufferToBase64(credential.rawId)
      }
    };
  } catch (error) {
    if (error instanceof DOMException && error.name === "NotAllowedError") {
      return {
        success: false,
        cancelled: true
      };
    }
    return {
      success: false,
      errorCode: "RegistrationFailed" /* RegistrationFailed */
    };
  }
}

// src/prf.ts
async function sha256(data) {
  const hashBuffer = await crypto.subtle.digest("SHA-256", data);
  return new Uint8Array(hashBuffer);
}
async function evaluatePrf(credentialIdBase64, salt, options) {
  let prfOutput = null;
  try {
    const encoder = new TextEncoder();
    const saltBytes = encoder.encode(salt);
    const saltHash = await sha256(saltBytes);
    const credentialId = base64ToArrayBuffer(credentialIdBase64);
    const transports = options.authenticatorAttachment === "platform" ? ["internal"] : ["internal", "usb", "nfc", "ble"];
    const publicKeyCredentialRequestOptions = {
      challenge: crypto.getRandomValues(new Uint8Array(32)),
      allowCredentials: [
        {
          id: credentialId,
          type: "public-key",
          transports
        }
      ],
      timeout: options.timeoutMs,
      userVerification: "required",
      extensions: {
        prf: {
          eval: {
            first: saltHash.buffer
          }
        }
      }
    };
    const assertion = await navigator.credentials.get({
      publicKey: publicKeyCredentialRequestOptions
    });
    if (assertion === null) {
      return {
        success: false,
        cancelled: true
      };
    }
    const extensionResults = assertion.getClientExtensionResults();
    const prfResults = extensionResults.prf?.results;
    if (!prfResults?.first) {
      return {
        success: false,
        errorCode: "PrfNotSupported" /* PrfNotSupported */
      };
    }
    prfOutput = new Uint8Array(prfResults.first);
    if (prfOutput.length !== 32) {
      return {
        success: false,
        errorCode: "KeyDerivationFailed" /* KeyDerivationFailed */
      };
    }
    const resultBase64 = toBase64(prfOutput);
    return {
      success: true,
      value: resultBase64
    };
  } catch (error) {
    if (error instanceof DOMException && error.name === "NotAllowedError") {
      return {
        success: false,
        cancelled: true
      };
    }
    return {
      success: false,
      errorCode: "KeyDerivationFailed" /* KeyDerivationFailed */
    };
  } finally {
    if (prfOutput) {
      zeroFill(prfOutput);
    }
  }
}
async function evaluatePrfDiscoverable(salt, options) {
  let prfOutput = null;
  try {
    const encoder = new TextEncoder();
    const saltBytes = encoder.encode(salt);
    const saltHash = await sha256(saltBytes);
    const publicKeyCredentialRequestOptions = {
      challenge: crypto.getRandomValues(new Uint8Array(32)),
      rpId: options.rpId ?? window.location.hostname,
      timeout: options.timeoutMs,
      userVerification: "required",
      extensions: {
        prf: {
          eval: {
            first: saltHash.buffer
          }
        }
      }
    };
    const assertion = await navigator.credentials.get({
      publicKey: publicKeyCredentialRequestOptions
    });
    if (assertion === null) {
      return {
        success: false,
        cancelled: true
      };
    }
    const extensionResults = assertion.getClientExtensionResults();
    const prfResults = extensionResults.prf?.results;
    if (!prfResults?.first) {
      return {
        success: false,
        errorCode: "PrfNotSupported" /* PrfNotSupported */
      };
    }
    prfOutput = new Uint8Array(prfResults.first);
    if (prfOutput.length !== 32) {
      return {
        success: false,
        errorCode: "KeyDerivationFailed" /* KeyDerivationFailed */
      };
    }
    const resultBase64 = toBase64(prfOutput);
    const credentialIdBase64 = toBase64(new Uint8Array(assertion.rawId));
    return {
      success: true,
      value: {
        credentialId: credentialIdBase64,
        prfOutput: resultBase64
      }
    };
  } catch (error) {
    if (error instanceof DOMException && error.name === "NotAllowedError") {
      return {
        success: false,
        cancelled: true
      };
    }
    return {
      success: false,
      errorCode: "KeyDerivationFailed" /* KeyDerivationFailed */
    };
  } finally {
    if (prfOutput) {
      zeroFill(prfOutput);
    }
  }
}

// src/index.ts
async function isPrfSupported() {
  return checkPrfSupport();
}
async function register(displayName, optionsJson) {
  const options = JSON.parse(optionsJson);
  const result = await registerCredentialWithPrf(displayName, options);
  return JSON.stringify(result);
}
async function evaluatePrfOutput(credentialIdBase64, salt, optionsJson) {
  const options = JSON.parse(optionsJson);
  const prfResult = await evaluatePrf(credentialIdBase64, salt, options);
  if (!prfResult.success || !prfResult.value) {
    return JSON.stringify({
      success: false,
      errorCode: prfResult.errorCode,
      cancelled: prfResult.cancelled
    });
  }
  return JSON.stringify({
    success: true,
    value: prfResult.value
    // Base64-encoded 32-byte PRF output
  });
}
async function evaluatePrfDiscoverableOutput(salt, optionsJson) {
  const options = JSON.parse(optionsJson);
  const prfResult = await evaluatePrfDiscoverable(salt, options);
  if (!prfResult.success || !prfResult.value) {
    return JSON.stringify({
      success: false,
      errorCode: prfResult.errorCode,
      cancelled: prfResult.cancelled
    });
  }
  return JSON.stringify({
    success: true,
    value: {
      credentialId: prfResult.value.credentialId,
      prfOutput: prfResult.value.prfOutput
      // Base64-encoded 32-byte PRF output
    }
  });
}
var blazorPrf = {
  isPrfSupported,
  register,
  evaluatePrfOutput,
  evaluatePrfDiscoverableOutput
};
globalThis.blazorPrf = blazorPrf;
var index_default = blazorPrf;
export {
  index_default as default,
  evaluatePrfDiscoverableOutput,
  evaluatePrfOutput,
  isPrfSupported,
  register
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vVHlwZVNjcmlwdC9zcmMvdXRpbHMudHMiLCAiLi4vVHlwZVNjcmlwdC9zcmMvd2ViYXV0aG4udHMiLCAiLi4vVHlwZVNjcmlwdC9zcmMvcHJmLnRzIiwgIi4uL1R5cGVTY3JpcHQvc3JjL2luZGV4LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBVdGlsaXR5IGZ1bmN0aW9ucyBmb3Igc2VjdXJlIG1lbW9yeSBoYW5kbGluZyBhbmQgZW5jb2RpbmdcblxuLyoqXG4gKiBaZXJvLWZpbGwgYSBVaW50OEFycmF5IHRvIHNlY3VyZWx5IHdpcGUgc2Vuc2l0aXZlIGRhdGEgZnJvbSBtZW1vcnkuXG4gKiBDYWxsIHRoaXMgaW1tZWRpYXRlbHkgYWZ0ZXIgc2Vuc2l0aXZlIGRhdGEgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHplcm9GaWxsKGJ1ZmZlcjogVWludDhBcnJheSk6IHZvaWQge1xuICAgIGJ1ZmZlci5maWxsKDApO1xufVxuXG4vKipcbiAqIEV4ZWN1dGUgYSBmdW5jdGlvbiB3aXRoIGEgYnVmZmVyLCBlbnN1cmluZyBpdCdzIHplcm9lZCBhZnRlciB1c2UuXG4gKiBAcGFyYW0gYnVmZmVyIFRoZSBzZW5zaXRpdmUgYnVmZmVyIHRvIHVzZVxuICogQHBhcmFtIGZuIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlIHdpdGggdGhlIGJ1ZmZlclxuICogQHJldHVybnMgVGhlIHJlc3VsdCBvZiB0aGUgZnVuY3Rpb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhTZWN1cmVCdWZmZXI8VD4oXG4gICAgYnVmZmVyOiBVaW50OEFycmF5LFxuICAgIGZuOiAoYnVmOiBVaW50OEFycmF5KSA9PiBUIHwgUHJvbWlzZTxUPlxuKTogUHJvbWlzZTxUPiB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGZuKGJ1ZmZlcik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgICAgemVyb0ZpbGwoYnVmZmVyKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29udmVydCBVaW50OEFycmF5IHRvIEJhc2U2NCBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvQmFzZTY0KGRhdGE6IFVpbnQ4QXJyYXkpOiBzdHJpbmcge1xuICAgIHJldHVybiBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUoLi4uZGF0YSkpO1xufVxuXG4vKipcbiAqIENvbnZlcnQgQmFzZTY0IHN0cmluZyB0byBVaW50OEFycmF5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQmFzZTY0KGJhc2U2NDogc3RyaW5nKTogVWludDhBcnJheSB7XG4gICAgY29uc3QgYmluYXJ5ID0gYXRvYihiYXNlNjQpO1xuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYmluYXJ5Lmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW5hcnkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYnl0ZXNbaV0gPSBiaW5hcnkuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVzO1xufVxuXG4vKipcbiAqIENvbnZlcnQgQXJyYXlCdWZmZXIgdG8gQmFzZTY0IHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlCdWZmZXJUb0Jhc2U2NChidWZmZXI6IEFycmF5QnVmZmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdG9CYXNlNjQobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XG59XG5cbi8qKlxuICogQ29udmVydCBCYXNlNjQgc3RyaW5nIHRvIEFycmF5QnVmZmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NDogc3RyaW5nKTogQXJyYXlCdWZmZXIge1xuICAgIHJldHVybiBmcm9tQmFzZTY0KGJhc2U2NCkuYnVmZmVyO1xufVxuXG4vKipcbiAqIENvbmNhdGVuYXRlIG11bHRpcGxlIFVpbnQ4QXJyYXlzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXRCeXRlcyguLi5hcnJheXM6IFVpbnQ4QXJyYXlbXSk6IFVpbnQ4QXJyYXkge1xuICAgIGNvbnN0IHRvdGFsTGVuZ3RoID0gYXJyYXlzLnJlZHVjZSgoYWNjLCBhcnIpID0+IGFjYyArIGFyci5sZW5ndGgsIDApO1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KHRvdGFsTGVuZ3RoKTtcbiAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICBmb3IgKGNvbnN0IGFyciBvZiBhcnJheXMpIHtcbiAgICAgICAgcmVzdWx0LnNldChhcnIsIG9mZnNldCk7XG4gICAgICAgIG9mZnNldCArPSBhcnIubGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuIiwgIi8vIFdlYkF1dGhuIHJlZ2lzdHJhdGlvbiB3aXRoIFBSRiBleHRlbnNpb24gc3VwcG9ydFxuXG5pbXBvcnQgeyBQcmZFcnJvckNvZGUsIHR5cGUgUHJmQ3JlZGVudGlhbCwgdHlwZSBQcmZPcHRpb25zLCB0eXBlIFByZlJlc3VsdCB9IGZyb20gJy4vdHlwZXMuanMnO1xuaW1wb3J0IHsgYXJyYXlCdWZmZXJUb0Jhc2U2NCB9IGZyb20gJy4vdXRpbHMuanMnO1xuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBjdXJyZW50IGJyb3dzZXIgYW5kIHBsYXRmb3JtIHN1cHBvcnQgV2ViQXV0aG4gUFJGIGV4dGVuc2lvbi5cbiAqXG4gKiBAcmV0dXJucyB0cnVlIGlmIFBSRiBpcyBsaWtlbHkgc3VwcG9ydGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1ByZlN1cHBvcnQoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgLy8gQ2hlY2sgYmFzaWMgV2ViQXV0aG4gc3VwcG9ydFxuICAgIGlmICghd2luZG93LlB1YmxpY0tleUNyZWRlbnRpYWwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHBsYXRmb3JtIGF1dGhlbnRpY2F0b3IgaXMgYXZhaWxhYmxlXG4gICAgaWYgKHR5cGVvZiBQdWJsaWNLZXlDcmVkZW50aWFsLmlzVXNlclZlcmlmeWluZ1BsYXRmb3JtQXV0aGVudGljYXRvckF2YWlsYWJsZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCBhdmFpbGFibGUgPSBhd2FpdCBQdWJsaWNLZXlDcmVkZW50aWFsLmlzVXNlclZlcmlmeWluZ1BsYXRmb3JtQXV0aGVudGljYXRvckF2YWlsYWJsZSgpO1xuICAgICAgICBpZiAoIWF2YWlsYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUFJGIGV4dGVuc2lvbiBzdXBwb3J0IGNhbiBvbmx5IGJlIHRydWx5IHZlcmlmaWVkIGR1cmluZyByZWdpc3RyYXRpb25cbiAgICAvLyBNb3N0IG1vZGVybiBwbGF0Zm9ybSBhdXRoZW50aWNhdG9ycyAoaU9TIDE3KywgbWFjT1MgMTQrLCBXaW5kb3dzIDEwKywgQW5kcm9pZCAxNCspIHN1cHBvcnQgaXRcbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlciBhIG5ldyBXZWJBdXRobiBjcmVkZW50aWFsIHdpdGggUFJGIGV4dGVuc2lvbiBlbmFibGVkLlxuICpcbiAqIEBwYXJhbSBkaXNwbGF5TmFtZSBPcHRpb25hbCBodW1hbi1yZWFkYWJsZSBkaXNwbGF5IG5hbWUuIElmIG51bGwsIHBsYXRmb3JtIGdlbmVyYXRlcyBvbmUuXG4gKiBAcGFyYW0gb3B0aW9ucyBQUkYgY29uZmlndXJhdGlvbiBvcHRpb25zXG4gKiBAcmV0dXJucyBQcmZSZXN1bHQgY29udGFpbmluZyB0aGUgY3JlZGVudGlhbCBvciBlcnJvclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVnaXN0ZXJDcmVkZW50aWFsV2l0aFByZihcbiAgICBkaXNwbGF5TmFtZTogc3RyaW5nIHwgbnVsbCxcbiAgICBvcHRpb25zOiBQcmZPcHRpb25zXG4pOiBQcm9taXNlPFByZlJlc3VsdDxQcmZDcmVkZW50aWFsPj4ge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIEdlbmVyYXRlIHJhbmRvbSB1c2VyIElEIChyZXF1aXJlZCBieSBXZWJBdXRobiBzcGVjLCBub3QgbWVhbmluZ2Z1bCBmb3IgUFJGLW9ubHkgdXNlKVxuICAgICAgICBjb25zdCB1c2VySWQgPSBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDE2KSk7XG5cbiAgICAgICAgLy8gRGlzcGxheSBuYW1lIHNob3duIGluIHBsYXRmb3JtIHBhc3NrZXkgbWFuYWdlclxuICAgICAgICBjb25zdCBlZmZlY3RpdmVEaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lID8/IG9wdGlvbnMucnBOYW1lO1xuXG4gICAgICAgIC8vIERldGVybWluZSBhdXRoZW50aWNhdG9yIGF0dGFjaG1lbnRcbiAgICAgICAgY29uc3QgYXV0aGVudGljYXRvckF0dGFjaG1lbnQ6IEF1dGhlbnRpY2F0b3JBdHRhY2htZW50IHwgdW5kZWZpbmVkID1cbiAgICAgICAgICAgIG9wdGlvbnMuYXV0aGVudGljYXRvckF0dGFjaG1lbnQgPT09ICdwbGF0Zm9ybScgPyAncGxhdGZvcm0nIDogJ2Nyb3NzLXBsYXRmb3JtJztcblxuICAgICAgICAvLyBCdWlsZCByZWdpc3RyYXRpb24gb3B0aW9uc1xuICAgICAgICBjb25zdCBwdWJsaWNLZXlDcmVkZW50aWFsQ3JlYXRpb25PcHRpb25zOiBQdWJsaWNLZXlDcmVkZW50aWFsQ3JlYXRpb25PcHRpb25zID0ge1xuICAgICAgICAgICAgY2hhbGxlbmdlOiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDMyKSksXG4gICAgICAgICAgICBycDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMucnBOYW1lLFxuICAgICAgICAgICAgICAgIGlkOiBvcHRpb25zLnJwSWQgPz8gd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgIGlkOiB1c2VySWQsXG4gICAgICAgICAgICAgICAgbmFtZTogZWZmZWN0aXZlRGlzcGxheU5hbWUsIC8vIFJlcXVpcmVkIGJ5IHNwZWNcbiAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogZWZmZWN0aXZlRGlzcGxheU5hbWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwdWJLZXlDcmVkUGFyYW1zOiBbXG4gICAgICAgICAgICAgICAgeyBhbGc6IC03LCB0eXBlOiAncHVibGljLWtleScgfSwgICAvLyBFUzI1NiAoUC0yNTYpXG4gICAgICAgICAgICAgICAgeyBhbGc6IC0yNTcsIHR5cGU6ICdwdWJsaWMta2V5JyB9ICAvLyBSUzI1NlxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0b3JTZWxlY3Rpb246IHtcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdG9yQXR0YWNobWVudCxcbiAgICAgICAgICAgICAgICByZXNpZGVudEtleTogJ3JlcXVpcmVkJyxcbiAgICAgICAgICAgICAgICB1c2VyVmVyaWZpY2F0aW9uOiAnZGlzY291cmFnZWQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGltZW91dDogb3B0aW9ucy50aW1lb3V0TXMsXG4gICAgICAgICAgICBhdHRlc3RhdGlvbjogJ25vbmUnLFxuICAgICAgICAgICAgZXh0ZW5zaW9uczoge1xuICAgICAgICAgICAgICAgIHByZjoge31cbiAgICAgICAgICAgIH0gYXMgQXV0aGVudGljYXRpb25FeHRlbnNpb25zQ2xpZW50SW5wdXRzXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQ3JlYXRlIGNyZWRlbnRpYWwgdXNpbmcgbmF2aWdhdG9yLmNyZWRlbnRpYWxzIEFQSVxuICAgICAgICBjb25zdCBjcmVkZW50aWFsID0gYXdhaXQgbmF2aWdhdG9yLmNyZWRlbnRpYWxzLmNyZWF0ZSh7XG4gICAgICAgICAgICBwdWJsaWNLZXk6IHB1YmxpY0tleUNyZWRlbnRpYWxDcmVhdGlvbk9wdGlvbnNcbiAgICAgICAgfSkgYXMgUHVibGljS2V5Q3JlZGVudGlhbCB8IG51bGw7XG5cbiAgICAgICAgaWYgKGNyZWRlbnRpYWwgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2FuY2VsbGVkOiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgUFJGIGV4dGVuc2lvbiBpcyBlbmFibGVkXG4gICAgICAgIGNvbnN0IGV4dGVuc2lvblJlc3VsdHMgPSBjcmVkZW50aWFsLmdldENsaWVudEV4dGVuc2lvblJlc3VsdHMoKSBhcyB7XG4gICAgICAgICAgICBwcmY/OiB7IGVuYWJsZWQ/OiBib29sZWFuIH07XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCFleHRlbnNpb25SZXN1bHRzLnByZj8uZW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IFByZkVycm9yQ29kZS5QcmZOb3RTdXBwb3J0ZWRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgaWQ6IGNyZWRlbnRpYWwuaWQsXG4gICAgICAgICAgICAgICAgcmF3SWQ6IGFycmF5QnVmZmVyVG9CYXNlNjQoY3JlZGVudGlhbC5yYXdJZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBVc2VyIGNhbmNlbGxlZCB0aGUgcmVnaXN0cmF0aW9uIC0gbm90IGFuIGVycm9yXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiAmJiBlcnJvci5uYW1lID09PSAnTm90QWxsb3dlZEVycm9yJykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjYW5jZWxsZWQ6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvckNvZGU6IFByZkVycm9yQ29kZS5SZWdpc3RyYXRpb25GYWlsZWRcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCAiLy8gUFJGIGV2YWx1YXRpb24gZm9yIGRldGVybWluaXN0aWMga2V5IGRlcml2YXRpb25cblxuaW1wb3J0IHsgUHJmRXJyb3JDb2RlLCB0eXBlIFByZk9wdGlvbnMsIHR5cGUgUHJmUmVzdWx0IH0gZnJvbSAnLi90eXBlcy5qcyc7XG5pbXBvcnQgeyBiYXNlNjRUb0FycmF5QnVmZmVyLCB0b0Jhc2U2NCwgemVyb0ZpbGwgfSBmcm9tICcuL3V0aWxzLmpzJztcblxuLyoqXG4gKiBIYXNoIGEgc3RyaW5nIHVzaW5nIFNIQS0yNTYgdmlhIFdlYiBDcnlwdG8gQVBJLlxuICogUmV0dXJucyBhIDMyLWJ5dGUgVWludDhBcnJheS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gc2hhMjU2KGRhdGE6IFVpbnQ4QXJyYXkpOiBQcm9taXNlPFVpbnQ4QXJyYXk+IHtcbiAgICBjb25zdCBoYXNoQnVmZmVyID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoJ1NIQS0yNTYnLCBkYXRhKTtcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoaGFzaEJ1ZmZlcik7XG59XG5cbi8qKlxuICogRXZhbHVhdGUgdGhlIFBSRiBleHRlbnNpb24gd2l0aCBhIGdpdmVuIHNhbHQgdG8gZGVyaXZlIGEgZGV0ZXJtaW5pc3RpYyAzMi1ieXRlIG91dHB1dC5cbiAqIFRoZSBQUkYgb3V0cHV0IGlzIHJldHVybmVkIHRvIEMjIGZvciBzZWN1cmUgc3RvcmFnZSBpbiBXQVNNIGxpbmVhciBtZW1vcnkuXG4gKlxuICogSU1QT1JUQU5UOiBUaGUgUFJGIG91dHB1dCBpcyBzZW5zaXRpdmUgYW5kIHNob3VsZCBiZSBoYW5kbGVkIHNlY3VyZWx5LlxuICogVGhpcyBmdW5jdGlvbiB6ZXJvcyB0aGUgaW50ZXJuYWwgYnVmZmVycyBhZnRlciByZXR1cm5pbmcgdGhlIEJhc2U2NCByZXN1bHQuXG4gKlxuICogQHBhcmFtIGNyZWRlbnRpYWxJZEJhc2U2NCBUaGUgY3JlZGVudGlhbCBJRCAoQmFzZTY0IGVuY29kZWQpXG4gKiBAcGFyYW0gc2FsdCBBIHN0cmluZyBzYWx0IHRoYXQgZGV0ZXJtaW5lcyB0aGUgZGVyaXZlZCBrZXkgKG11c3QgYmUgY29uc2lzdGVudCBhY3Jvc3MgZGV2aWNlcylcbiAqIEBwYXJhbSBvcHRpb25zIFBSRiBjb25maWd1cmF0aW9uIG9wdGlvbnNcbiAqIEByZXR1cm5zIFByZlJlc3VsdCBjb250YWluaW5nIHRoZSAzMi1ieXRlIFBSRiBvdXRwdXQgYXMgQmFzZTY0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBldmFsdWF0ZVByZihcbiAgICBjcmVkZW50aWFsSWRCYXNlNjQ6IHN0cmluZyxcbiAgICBzYWx0OiBzdHJpbmcsXG4gICAgb3B0aW9uczogUHJmT3B0aW9uc1xuKTogUHJvbWlzZTxQcmZSZXN1bHQ8c3RyaW5nPj4ge1xuICAgIGxldCBwcmZPdXRwdXQ6IFVpbnQ4QXJyYXkgfCBudWxsID0gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICAgIC8vIEhhc2ggdGhlIHNhbHQgdG8gZW5zdXJlIGNvbnNpc3RlbnQgMzItYnl0ZSBsZW5ndGhcbiAgICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICBjb25zdCBzYWx0Qnl0ZXMgPSBlbmNvZGVyLmVuY29kZShzYWx0KTtcbiAgICAgICAgY29uc3Qgc2FsdEhhc2ggPSBhd2FpdCBzaGEyNTYoc2FsdEJ5dGVzKTtcblxuICAgICAgICBjb25zdCBjcmVkZW50aWFsSWQgPSBiYXNlNjRUb0FycmF5QnVmZmVyKGNyZWRlbnRpYWxJZEJhc2U2NCk7XG5cbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRyYW5zcG9ydHMgYmFzZWQgb24gYXV0aGVudGljYXRvciBhdHRhY2htZW50XG4gICAgICAgIGNvbnN0IHRyYW5zcG9ydHM6IEF1dGhlbnRpY2F0b3JUcmFuc3BvcnRbXSA9XG4gICAgICAgICAgICBvcHRpb25zLmF1dGhlbnRpY2F0b3JBdHRhY2htZW50ID09PSAncGxhdGZvcm0nXG4gICAgICAgICAgICAgICAgPyBbJ2ludGVybmFsJ11cbiAgICAgICAgICAgICAgICA6IFsnaW50ZXJuYWwnLCAndXNiJywgJ25mYycsICdibGUnXTtcblxuICAgICAgICAvLyBCdWlsZCBhdXRoZW50aWNhdGlvbiBvcHRpb25zIHdpdGggUFJGIGV4dGVuc2lvblxuICAgICAgICBjb25zdCBwdWJsaWNLZXlDcmVkZW50aWFsUmVxdWVzdE9wdGlvbnM6IFB1YmxpY0tleUNyZWRlbnRpYWxSZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNoYWxsZW5nZTogY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgzMikpLFxuICAgICAgICAgICAgYWxsb3dDcmVkZW50aWFsczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGNyZWRlbnRpYWxJZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3B1YmxpYy1rZXknLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnRzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHRpbWVvdXQ6IG9wdGlvbnMudGltZW91dE1zLFxuICAgICAgICAgICAgdXNlclZlcmlmaWNhdGlvbjogJ3JlcXVpcmVkJyxcbiAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICBwcmY6IHtcbiAgICAgICAgICAgICAgICAgICAgZXZhbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3Q6IHNhbHRIYXNoLmJ1ZmZlciBhcyBBcnJheUJ1ZmZlclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBhcyBBdXRoZW50aWNhdGlvbkV4dGVuc2lvbnNDbGllbnRJbnB1dHNcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBQZXJmb3JtIGF1dGhlbnRpY2F0aW9uIHdpdGggUFJGIGV2YWx1YXRpb25cbiAgICAgICAgY29uc3QgYXNzZXJ0aW9uID0gYXdhaXQgbmF2aWdhdG9yLmNyZWRlbnRpYWxzLmdldCh7XG4gICAgICAgICAgICBwdWJsaWNLZXk6IHB1YmxpY0tleUNyZWRlbnRpYWxSZXF1ZXN0T3B0aW9uc1xuICAgICAgICB9KSBhcyBQdWJsaWNLZXlDcmVkZW50aWFsIHwgbnVsbDtcblxuICAgICAgICBpZiAoYXNzZXJ0aW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNhbmNlbGxlZDogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV4dHJhY3QgUFJGIHJlc3VsdHNcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uUmVzdWx0cyA9IGFzc2VydGlvbi5nZXRDbGllbnRFeHRlbnNpb25SZXN1bHRzKCkgYXMge1xuICAgICAgICAgICAgcHJmPzoge1xuICAgICAgICAgICAgICAgIHJlc3VsdHM/OiB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0PzogQXJyYXlCdWZmZXI7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcHJmUmVzdWx0cyA9IGV4dGVuc2lvblJlc3VsdHMucHJmPy5yZXN1bHRzO1xuXG4gICAgICAgIGlmICghcHJmUmVzdWx0cz8uZmlyc3QpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBQcmZFcnJvckNvZGUuUHJmTm90U3VwcG9ydGVkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29udmVydCB0byBVaW50OEFycmF5XG4gICAgICAgIHByZk91dHB1dCA9IG5ldyBVaW50OEFycmF5KHByZlJlc3VsdHMuZmlyc3QpO1xuXG4gICAgICAgIGlmIChwcmZPdXRwdXQubGVuZ3RoICE9PSAzMikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IFByZkVycm9yQ29kZS5LZXlEZXJpdmF0aW9uRmFpbGVkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29udmVydCB0byBCYXNlNjQgZm9yIHRyYW5zZmVyIHRvIEMjXG4gICAgICAgIGNvbnN0IHJlc3VsdEJhc2U2NCA9IHRvQmFzZTY0KHByZk91dHB1dCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogcmVzdWx0QmFzZTY0XG4gICAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gVXNlciBjYW5jZWxsZWQgdGhlIGF1dGhlbnRpY2F0aW9uIC0gbm90IGFuIGVycm9yXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiAmJiBlcnJvci5uYW1lID09PSAnTm90QWxsb3dlZEVycm9yJykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjYW5jZWxsZWQ6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvckNvZGU6IFByZkVycm9yQ29kZS5LZXlEZXJpdmF0aW9uRmFpbGVkXG4gICAgICAgIH07XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8gWmVybyB0aGUgUFJGIG91dHB1dCBpbiBKYXZhU2NyaXB0IG1lbW9yeVxuICAgICAgICAvLyBUaGUgQmFzZTY0IHN0cmluZyBoYXMgYWxyZWFkeSBiZWVuIGNyZWF0ZWQgZm9yIEMjIHRyYW5zZmVyXG4gICAgICAgIGlmIChwcmZPdXRwdXQpIHtcbiAgICAgICAgICAgIHplcm9GaWxsKHByZk91dHB1dCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogRXZhbHVhdGUgUFJGIHdpdGhvdXQgYSBzcGVjaWZpYyBjcmVkZW50aWFsIElEIChkaXNjb3ZlcmFibGUgY3JlZGVudGlhbCkuXG4gKiBUaGUgYXV0aGVudGljYXRvciB3aWxsIHByb21wdCB0aGUgdXNlciB0byBzZWxlY3QgYSBjcmVkZW50aWFsLlxuICpcbiAqIEBwYXJhbSBzYWx0IEEgc3RyaW5nIHNhbHQgdGhhdCBkZXRlcm1pbmVzIHRoZSBkZXJpdmVkIGtleVxuICogQHBhcmFtIG9wdGlvbnMgUFJGIGNvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICogQHJldHVybnMgUHJmUmVzdWx0IGNvbnRhaW5pbmcgdGhlIGNyZWRlbnRpYWwgSUQgYW5kIDMyLWJ5dGUgUFJGIG91dHB1dCBhcyBCYXNlNjRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV2YWx1YXRlUHJmRGlzY292ZXJhYmxlKFxuICAgIHNhbHQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiBQcmZPcHRpb25zXG4pOiBQcm9taXNlPFByZlJlc3VsdDx7IGNyZWRlbnRpYWxJZDogc3RyaW5nOyBwcmZPdXRwdXQ6IHN0cmluZyB9Pj4ge1xuICAgIGxldCBwcmZPdXRwdXQ6IFVpbnQ4QXJyYXkgfCBudWxsID0gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICAgIC8vIEhhc2ggdGhlIHNhbHQgdG8gZW5zdXJlIGNvbnNpc3RlbnQgMzItYnl0ZSBsZW5ndGhcbiAgICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICBjb25zdCBzYWx0Qnl0ZXMgPSBlbmNvZGVyLmVuY29kZShzYWx0KTtcbiAgICAgICAgY29uc3Qgc2FsdEhhc2ggPSBhd2FpdCBzaGEyNTYoc2FsdEJ5dGVzKTtcblxuICAgICAgICAvLyBCdWlsZCBhdXRoZW50aWNhdGlvbiBvcHRpb25zIHdpdGhvdXQgYWxsb3dDcmVkZW50aWFscyAoZGlzY292ZXJhYmxlKVxuICAgICAgICBjb25zdCBwdWJsaWNLZXlDcmVkZW50aWFsUmVxdWVzdE9wdGlvbnM6IFB1YmxpY0tleUNyZWRlbnRpYWxSZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNoYWxsZW5nZTogY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgzMikpLFxuICAgICAgICAgICAgcnBJZDogb3B0aW9ucy5ycElkID8/IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSxcbiAgICAgICAgICAgIHRpbWVvdXQ6IG9wdGlvbnMudGltZW91dE1zLFxuICAgICAgICAgICAgdXNlclZlcmlmaWNhdGlvbjogJ3JlcXVpcmVkJyxcbiAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICBwcmY6IHtcbiAgICAgICAgICAgICAgICAgICAgZXZhbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3Q6IHNhbHRIYXNoLmJ1ZmZlciBhcyBBcnJheUJ1ZmZlclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBhcyBBdXRoZW50aWNhdGlvbkV4dGVuc2lvbnNDbGllbnRJbnB1dHNcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBQZXJmb3JtIGF1dGhlbnRpY2F0aW9uIHdpdGggUFJGIGV2YWx1YXRpb25cbiAgICAgICAgY29uc3QgYXNzZXJ0aW9uID0gYXdhaXQgbmF2aWdhdG9yLmNyZWRlbnRpYWxzLmdldCh7XG4gICAgICAgICAgICBwdWJsaWNLZXk6IHB1YmxpY0tleUNyZWRlbnRpYWxSZXF1ZXN0T3B0aW9uc1xuICAgICAgICB9KSBhcyBQdWJsaWNLZXlDcmVkZW50aWFsIHwgbnVsbDtcblxuICAgICAgICBpZiAoYXNzZXJ0aW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNhbmNlbGxlZDogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV4dHJhY3QgUFJGIHJlc3VsdHNcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uUmVzdWx0cyA9IGFzc2VydGlvbi5nZXRDbGllbnRFeHRlbnNpb25SZXN1bHRzKCkgYXMge1xuICAgICAgICAgICAgcHJmPzoge1xuICAgICAgICAgICAgICAgIHJlc3VsdHM/OiB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0PzogQXJyYXlCdWZmZXI7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcHJmUmVzdWx0cyA9IGV4dGVuc2lvblJlc3VsdHMucHJmPy5yZXN1bHRzO1xuXG4gICAgICAgIGlmICghcHJmUmVzdWx0cz8uZmlyc3QpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBQcmZFcnJvckNvZGUuUHJmTm90U3VwcG9ydGVkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29udmVydCB0byBVaW50OEFycmF5XG4gICAgICAgIHByZk91dHB1dCA9IG5ldyBVaW50OEFycmF5KHByZlJlc3VsdHMuZmlyc3QpO1xuXG4gICAgICAgIGlmIChwcmZPdXRwdXQubGVuZ3RoICE9PSAzMikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IFByZkVycm9yQ29kZS5LZXlEZXJpdmF0aW9uRmFpbGVkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29udmVydCB0byBCYXNlNjQgZm9yIHRyYW5zZmVyIHRvIEMjXG4gICAgICAgIGNvbnN0IHJlc3VsdEJhc2U2NCA9IHRvQmFzZTY0KHByZk91dHB1dCk7XG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWxJZEJhc2U2NCA9IHRvQmFzZTY0KG5ldyBVaW50OEFycmF5KGFzc2VydGlvbi5yYXdJZCkpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsSWQ6IGNyZWRlbnRpYWxJZEJhc2U2NCxcbiAgICAgICAgICAgICAgICBwcmZPdXRwdXQ6IHJlc3VsdEJhc2U2NFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIFVzZXIgY2FuY2VsbGVkIHRoZSBhdXRoZW50aWNhdGlvbiAtIG5vdCBhbiBlcnJvclxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiYgZXJyb3IubmFtZSA9PT0gJ05vdEFsbG93ZWRFcnJvcicpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2FuY2VsbGVkOiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3JDb2RlOiBQcmZFcnJvckNvZGUuS2V5RGVyaXZhdGlvbkZhaWxlZFxuICAgICAgICB9O1xuICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIFplcm8gdGhlIFBSRiBvdXRwdXQgaW4gSmF2YVNjcmlwdCBtZW1vcnlcbiAgICAgICAgaWYgKHByZk91dHB1dCkge1xuICAgICAgICAgICAgemVyb0ZpbGwocHJmT3V0cHV0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICIvLyBNYWluIGVudHJ5IHBvaW50IC0gZXhwb3J0cyBXZWJBdXRobi9QUkYgZnVuY3Rpb25zIG9ubHlcbi8vIENyeXB0byBvcGVyYXRpb25zIGFyZSBoYW5kbGVkIGluIEMjL1dBU00gZm9yIHNlY3VyaXR5XG5cbmltcG9ydCB7XG4gICAgdHlwZSBQcmZPcHRpb25zLFxufSBmcm9tICcuL3R5cGVzLmpzJztcbmltcG9ydCB7IGNoZWNrUHJmU3VwcG9ydCwgcmVnaXN0ZXJDcmVkZW50aWFsV2l0aFByZiB9IGZyb20gJy4vd2ViYXV0aG4uanMnO1xuaW1wb3J0IHsgZXZhbHVhdGVQcmYsIGV2YWx1YXRlUHJmRGlzY292ZXJhYmxlIH0gZnJvbSAnLi9wcmYuanMnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBXZWJBdXRobiAvIFBSRiBGdW5jdGlvbnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDaGVjayBpZiBQUkYgZXh0ZW5zaW9uIGlzIHN1cHBvcnRlZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzUHJmU3VwcG9ydGVkKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiBjaGVja1ByZlN1cHBvcnQoKTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlciBhIG5ldyBjcmVkZW50aWFsIHdpdGggUFJGIHN1cHBvcnQuXG4gKiBSZXR1cm5zIEpTT04tc2VyaWFsaXplZCBQcmZSZXN1bHQ8UHJmQ3JlZGVudGlhbD4uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWdpc3RlcihcbiAgICBkaXNwbGF5TmFtZTogc3RyaW5nIHwgbnVsbCxcbiAgICBvcHRpb25zSnNvbjogc3RyaW5nXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IG9wdGlvbnM6IFByZk9wdGlvbnMgPSBKU09OLnBhcnNlKG9wdGlvbnNKc29uKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWdpc3RlckNyZWRlbnRpYWxXaXRoUHJmKGRpc3BsYXlOYW1lLCBvcHRpb25zKTtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocmVzdWx0KTtcbn1cblxuLyoqXG4gKiBFdmFsdWF0ZSBQUkYgd2l0aCBhIHNwZWNpZmljIGNyZWRlbnRpYWwuXG4gKiBSZXR1cm5zIEpTT04gd2l0aCByYXcgUFJGIG91dHB1dCAoQmFzZTY0KSAtIGtleSBkZXJpdmF0aW9uIGhhcHBlbnMgaW4gQyMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBldmFsdWF0ZVByZk91dHB1dChcbiAgICBjcmVkZW50aWFsSWRCYXNlNjQ6IHN0cmluZyxcbiAgICBzYWx0OiBzdHJpbmcsXG4gICAgb3B0aW9uc0pzb246IHN0cmluZ1xuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBvcHRpb25zOiBQcmZPcHRpb25zID0gSlNPTi5wYXJzZShvcHRpb25zSnNvbik7XG5cbiAgICAvLyBFdmFsdWF0ZSBQUkYgdG8gZ2V0IGRldGVybWluaXN0aWMgb3V0cHV0XG4gICAgY29uc3QgcHJmUmVzdWx0ID0gYXdhaXQgZXZhbHVhdGVQcmYoY3JlZGVudGlhbElkQmFzZTY0LCBzYWx0LCBvcHRpb25zKTtcblxuICAgIGlmICghcHJmUmVzdWx0LnN1Y2Nlc3MgfHwgIXByZlJlc3VsdC52YWx1ZSkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvckNvZGU6IHByZlJlc3VsdC5lcnJvckNvZGUsXG4gICAgICAgICAgICBjYW5jZWxsZWQ6IHByZlJlc3VsdC5jYW5jZWxsZWRcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHJhdyBQUkYgb3V0cHV0IC0gQyMgd2lsbCBkZXJpdmUga2V5c1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHZhbHVlOiBwcmZSZXN1bHQudmFsdWUgIC8vIEJhc2U2NC1lbmNvZGVkIDMyLWJ5dGUgUFJGIG91dHB1dFxuICAgIH0pO1xufVxuXG4vKipcbiAqIEV2YWx1YXRlIFBSRiB1c2luZyBkaXNjb3ZlcmFibGUgY3JlZGVudGlhbCAodXNlciBzZWxlY3RzKS5cbiAqIFJldHVybnMgSlNPTiB3aXRoIGNyZWRlbnRpYWxJZCBhbmQgcmF3IFBSRiBvdXRwdXQgKEJhc2U2NCkuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBldmFsdWF0ZVByZkRpc2NvdmVyYWJsZU91dHB1dChcbiAgICBzYWx0OiBzdHJpbmcsXG4gICAgb3B0aW9uc0pzb246IHN0cmluZ1xuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBvcHRpb25zOiBQcmZPcHRpb25zID0gSlNPTi5wYXJzZShvcHRpb25zSnNvbik7XG5cbiAgICAvLyBFdmFsdWF0ZSBQUkYgd2l0aCBkaXNjb3ZlcmFibGUgY3JlZGVudGlhbFxuICAgIGNvbnN0IHByZlJlc3VsdCA9IGF3YWl0IGV2YWx1YXRlUHJmRGlzY292ZXJhYmxlKHNhbHQsIG9wdGlvbnMpO1xuXG4gICAgaWYgKCFwcmZSZXN1bHQuc3VjY2VzcyB8fCAhcHJmUmVzdWx0LnZhbHVlKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yQ29kZTogcHJmUmVzdWx0LmVycm9yQ29kZSxcbiAgICAgICAgICAgIGNhbmNlbGxlZDogcHJmUmVzdWx0LmNhbmNlbGxlZFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gY3JlZGVudGlhbCBJRCBhbmQgcmF3IFBSRiBvdXRwdXQgLSBDIyB3aWxsIGRlcml2ZSBrZXlzXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgIGNyZWRlbnRpYWxJZDogcHJmUmVzdWx0LnZhbHVlLmNyZWRlbnRpYWxJZCxcbiAgICAgICAgICAgIHByZk91dHB1dDogcHJmUmVzdWx0LnZhbHVlLnByZk91dHB1dCAgLy8gQmFzZTY0LWVuY29kZWQgMzItYnl0ZSBQUkYgb3V0cHV0XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRXhwb3J0IHRvIGdsb2JhbCBzY29wZSBmb3IgQyMgSlNJbXBvcnRcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgYmxhem9yUHJmID0ge1xuICAgIGlzUHJmU3VwcG9ydGVkLFxuICAgIHJlZ2lzdGVyLFxuICAgIGV2YWx1YXRlUHJmT3V0cHV0LFxuICAgIGV2YWx1YXRlUHJmRGlzY292ZXJhYmxlT3V0cHV0XG59O1xuXG4vLyBNYWtlIGF2YWlsYWJsZSBnbG9iYWxseSBmb3IgSlNJbXBvcnRcbihnbG9iYWxUaGlzIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KS5ibGF6b3JQcmYgPSBibGF6b3JQcmY7XG5cbmV4cG9ydCBkZWZhdWx0IGJsYXpvclByZjtcbiJdLAogICJtYXBwaW5ncyI6ICI7QUFNTyxTQUFTLFNBQVMsUUFBMEI7QUFDL0MsU0FBTyxLQUFLLENB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
